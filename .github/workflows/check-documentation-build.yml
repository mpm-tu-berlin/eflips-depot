name: Check Documentation on Pull Request

on: [push]

env:
  PYTHON_VERSION: "3.11"
  POETRY_VERSION: "1.4.2"
  POETRY_URL: https://install.python-poetry.org


jobs:
  build:

    runs-on: ubuntu-latest

    steps:
      # We do not need SSH Keys, .. , as we only need the dev dependencies for building sphinx doc, nothing else
      - name: Check out code
        uses: actions/checkout@v3

      - name: Set up Python ${{ env.PYTHON_VERSION }}
        uses: actions/setup-python@v3
        with:
          python-version: ${{ env.PYTHON_VERSION }}
      - name: Install poetry
        run: |
          python -m pip install --upgrade pip
          pip install poetry
          poetry config experimental.system-git-client true
      - name: Install Dependencies (dev only)
        run: |
          poetry install --no-root --only dev

      - name: Compile Sphinx Documentation
        run: |
          cd docs/
          poetry run sphinx-build -b html . _build